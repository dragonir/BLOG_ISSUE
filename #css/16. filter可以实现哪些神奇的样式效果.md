# `CSS filter` æœ‰å“ªäº›ç¥å¥‡ç”¨é€”

![filter_0.png](http://127.0.0.1:8080/%23css/images/filter_0.png)

## èƒŒæ™¯

### å®šä¹‰

`filter`Â CSSå±æ€§å°†æ¨¡ç³Šæˆ–é¢œè‰²åç§»ç­‰å›¾å½¢æ•ˆæœåº”ç”¨äºå…ƒç´ ã€‚æ»¤é•œé€šå¸¸ç”¨äºè°ƒæ•´å›¾åƒï¼ŒèƒŒæ™¯å’Œè¾¹æ¡†çš„æ¸²æŸ“ã€‚CSS æ ‡å‡†é‡ŒåŒ…å«äº†ä¸€äº›å·²å®ç°é¢„å®šä¹‰æ•ˆæœçš„å‡½æ•°ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸ª SVGÂ æ»¤é•œï¼Œé€šè¿‡ä¸€ä¸ª URL é“¾æ¥åˆ° SVGÂ æ»¤é•œå…ƒç´ ã€‚

### filterå‡½æ•°

Â `<filter-function>`Â CSSÂ æ•°æ®ç±»å‹Â ä»£è¡¨å¯ä»¥æ”¹å˜è¾“å…¥å›¾åƒå¤–è§‚çš„å›¾å½¢æ•ˆæœã€‚å®ƒå¯ä»¥ç”¨äº `filter`Â å’ŒÂ `backdrop-filter`Â å±æ€§ã€‚`<filter-function>`Â æ•°æ®ç±»å‹ç”±ä¸‹åˆ—è¿‡æ»¤å™¨å‡½æ•°ä¹‹ä¸€æŒ‡å®šçš„ã€‚æ¯ä¸ªå‡½æ•°éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°æ— æ•ˆï¼Œç»“æœä¸ä¼šè¢«æ”¹å˜ï¼Œå¦‚åŒæ²¡æœ‰ä½¿ç”¨è¿‡æ»¤å™¨ä¸€æ ·ã€‚

* `blur()`ï¼šæ¨¡ç³Šå›¾åƒ
* `brightness()` ï¼šè®©å›¾åƒæ›´æ˜äº®æˆ–æ›´æš—æ·¡
* `contrast()`ï¼šå¢åŠ æˆ–å‡å°‘å›¾åƒçš„å¯¹æ¯”åº¦
* `drop-shadow()`ï¼šåœ¨å›¾åƒåæ–¹åº”ç”¨æŠ•å½±
* `grayscale()`ï¼šå°†å›¾åƒè½¬ä¸ºç°åº¦å›¾
* `hue-rotate()`ï¼šæ”¹å˜å›¾åƒçš„æ•´ä½“è‰²è°ƒ
* `invert()`ï¼šåè½¬å›¾åƒé¢œè‰²
* `opacity()`ï¼šæ”¹å˜å›¾åƒé€æ˜åº¦
* `saturate()`ï¼šè¶…é¥±å’Œæˆ–å»é¥±å’Œè¾“å…¥çš„å›¾åƒ
* `sepia()`ï¼šå°†å›¾åƒè½¬ä¸ºæ£•è¤è‰²

### åŸºæœ¬è¯­æ³•

è®¾ç½®filterå‡½æ•°ï¼š

```css
filter: <filter-function> [<filter-function>]* | none
```

ç»™å…ƒç´ æ·»åŠ svgæ»¤é•œ

```css
filter: url(file.svg#filter-element-id)
```

```css
/* ä½¿ç”¨SVG filter */
filter: url("filters.svg#filter-id");
/* ä½¿ç”¨filterå‡½æ•° */
filter: blur(5px);
filter: brightness(0.4);
filter: contrast(200%);
filter: drop-shadow(16px 16px 20px blue);
filter: grayscale(50%);
filter: hue-rotate(90deg);
filter: invert(75%);
filter: opacity(25%);
filter: saturate(30%);
filter: sepia(60%);
/* å¤šä¸ªfilter */
filter: contrast(175%) brightness(3%);
/* ä¸ä½¿ç”¨filter */
filter: none;
/* å…¨å±€å˜é‡ */
filter: inherit;
filter: initial;
filter: unset;
```

![16.1](http://127.0.0.1:8080/%23css/images/16.1.png)

## åº”ç”¨æ¡ˆä¾‹

### æ›´åŠ æ™ºèƒ½çš„é˜´å½±æ•ˆæœ

åœ¨ç»™å…ƒç´ æ·»åŠ é˜´å½±çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨ `box-shadow` å±æ€§ï¼Œé€šè¿‡ `box-shadow(xåç§», yåç§», æ¨¡ç³Šå¤§å°, é˜´å½±å¤§å°, è‰²å€¼, inset)` çš„è¯­æ³•å½¢å¼å¾ˆå®¹æ˜“ä¸ºå…ƒç´ æ·»åŠ é˜´å½±æ•ˆæœï¼Œä½† `box-shadow` ä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯åœ¨ç»™é€æ˜å›¾ç‰‡æ·»åŠ é˜´å½±æ•ˆæœæ—¶ï¼Œæ— æ³•ç©¿é€å…ƒç´ ï¼Œåªèƒ½æ·»åŠ åˆ°é€æ˜å›¾ç‰‡å…ƒç´ çš„ç›’æ¨¡å‹ä¸Šã€‚è¿™ä¸ªæ—¶å€™ï¼Œ`filter` å±æ€§çš„ `drop-shadow` æ–¹æ³•å°±èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç”¨å®ƒæ·»åŠ çš„é˜´å½±å¯ä»¥ç©¿é€å…ƒç´ ï¼Œè€Œä¸æ˜¯æ·»åŠ åˆ°å…ƒç´ çš„ç›’æ¨¡å‹è¾¹æ¡†ä¸Šã€‚

`drop-shadow` æ·»åŠ çš„é˜´å½±é™¤äº†å¯ä»¥ç©¿é€é€æ˜å…ƒç´ å¤–ï¼Œé˜´å½±æ•ˆæœå’Œ `box-shadow` æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœæµè§ˆå™¨æ”¯æŒç¡¬ä»¶åŠ é€Ÿçš„è¯ï¼Œä½¿ç”¨ `filter` æ·»åŠ çš„é˜´å½±æ•ˆæœä¼šæ›´åŠ é€¼çœŸã€‚

`drop-shadow` è¯­æ³•å¦‚ä¸‹ï¼ˆå®ƒé™¤äº†ä¸æ”¯æŒè®¾ç½® `inset`ï¼Œå…¶ä»–å’Œ `box-shadow` æ˜¯å®Œå…¨ç›¸åŒçš„ï¼‰ï¼š

```css
filter: drop-shadow(xåç§», yåç§», æ¨¡ç³Šå¤§å°, è‰²å€¼);
```

å¦‚ï¼š

```css
filter: drop-shadow(1px 1px 15px rgba(0, 0, 0, .5));
```

ä¸‹å›¾æ˜¯åˆ†åˆ«ä½¿ç”¨ `box-shadow` å’Œ `filter: drop-shadow` ä¸ºé€æ˜å…ƒç´ æ·»åŠ é˜´å½±çš„å¯¹æ¯”ï¼š

![filter_3.png](http://127.0.0.1:8080/%23css/images/filter_3.png)

```html
<img class="box-shadow" src="futurama.png" />
<img class="drop-shadow" src="futurama.png" />
```

```css
.box-shadow {
  box-shadow: 1px 1px 15px rgba(0, 0, 0, .5);
}
.drop-shadow {
  filter: drop-shadow(1px 1px 15px rgba(0, 0, 0, .5));
}
```

### å…ƒç´ æˆ–æ•´æ”¹é¡µé¢ç½®ç°

é€šè¿‡ 

```css
filter: grayscale(100%);
```

```html
<body class="gray-filter">
  <h1 class="title">FUTURAMA</h1>
  <img class="img" width="500" src="./images/futurama.png" />
</body>
```

![filter_4.png](http://127.0.0.1:8080/%23css/images/filter_4.png)

```css
.gray {
  -webkit-filter: grayscale(100%);
  -moz-filter: grayscale(100%);
  -ms-filter: grayscale(100%);
  -o-filter: grayscale(100%);
  filter: grayscale(100%);
  filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
}
```

![filter_5.png](http://127.0.0.1:8080/%23css/images/filter_5.png)

æ”¯æŒie8

```css
.gray-filter {
  -webkit-filter: grayscale(100%);
  -moz-filter: grayscale(100%);
  -ms-filter: grayscale(100%);
  -o-filter: grayscale(100%);
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
  filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
  -webkit-filter: grayscale(1);
  filter: grayscale(100%);
}

```

```javascript
(function setGray() {
  var endTime = Date.parse("Apr 06 2077 00:00:01");
  var timestamp = Date.parse(new Date());
  if (timestamp <= endTime) {
    document.querySelector('html').classList.add('gray-filter');
  }
})();
```

### å…ƒç´ é«˜äº®

ä½¿ç”¨ brightness å¯ä»¥è½»æ¾å®ç°å†…å®¹é«˜äº®

![16.1](http://127.0.0.1:8080/%23css/images/16.0.gif)

```html
<div class="container">
  <a class="button">ğŸ‹</a>
  <a class="button">ğŸ</a>
  <a class="button">ğŸ</a>
  <a class="button dark">ğŸ¥‘</a>
  <a class="button dark">ğŸ„</a>
  <a class="button dark">ğŸŒ½</a>
  <a class="button disabled">ğŸ’</a>
  <a class="button disabled">ğŸ…</a>
  <a class="button disabled">ğŸ¥”</a>
</div>
```

```css
.container {
  margin: 40px;
}
.button {
  padding: 0.5em 0.5em;
  background: #E0E0E0;
  border-radius: 3px;
}
.button.dark {
  background: #333;
}
.button:hover:not(.disabled) {
  cursor: pointer;
  border-radius: 3px;
  filter: brightness(110%) saturate(140%);
}
.button.disabled {
  filter: grayscale(100%);
}
```

> å…¶ä»–hover æ•ˆæœ https://codepen.io/nxworld/details/ZYNOBZ
> å…¶ä»– æŒ‰é’®åè‰² https://codepen.io/monkey-company/pen/zZZvRp

## æ¯›ç»ç’ƒæ•ˆæœ

![filter_6](http://127.0.0.1:8080/%23css/images/filter_6.png)

```html
<div class="container">
  <div class="glass glass-by-filter"></div>
  <div class="glass glass-by-backdrop-filter"></div>
</div>
```

```css
.glass {
  height: 300px;
  width: 300px;
  border: 1px groove #EFEFEF;
  border-radius: 12px;
  background: rgba(242, 242, 242, 0.5);
  box-shadow: 0 0.3px 0.7px rgba(0, 0, 0, 0.126),
    0 0.9px 1.7px rgba(0, 0, 0, 0.179), 0 1.8px 3.5px rgba(0, 0, 0, 0.224),
    0 3.7px 7.3px rgba(0, 0, 0, 0.277), 0 10px 20px rgba(0, 0, 0, 0.4);
}
.glass-by-filter {
z-index: 1;
  box-sizing: border-box;
  position: relative;
}
.glass-by-filter::before {
  content: "";
  position: absolute;
  top: 0; right: 0; bottom: 0; left: 0;
  z-index: -1;
  background: inherit;
  filter: blur(10px);
}
.glass-by-backdrop-filter {
  backdrop-filter: blur(10px);
}
```

> æ¯›ç»ç’ƒè¾¹æ¡†æ•ˆæœï¼š

## æ¯›ç»ç’ƒæ•ˆæœ-é€æ˜è¾¹æ¡†

![16.4](http://127.0.0.1:8080/%23css/images/16.4.png)

```html
<div>I'm an element with a blurry border. This is created with an actual border on the pseudo-elements, the :before being blurred and :after clipped to the padding-box.</div>
```

```scss
$url: url(https://images.unsplash.com/photo-1544070078-a212eda27b49?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ);
$b: 1.5em; // border-width
$blur: blur(9px);

div {
  overflow: hidden;
  position: relative;
  padding: calc(1em + #{$b});
  max-width: 23em;
  color: #fff;
  font: 600 1.5em/ 1.375 segoe script, comic sans ms, cursive;
  text-shadow: 1px 1px #000;
  
  &:before, &:after {
    position: absolute;
    z-index: -1; /* put it *behind* parent */
    /* zero all offsets */
    top: 0; right: 0; bottom: 0; left: 0;
    border: solid $b rgba(#000, .03);
    background: $url 50%/ cover 
                  border-box /* background-origin */
                  padding-box /* background-clip */;
    content: ''
  }
  
  &:before {
    border-color: transparent;
    background-clip: border-box;
    /* -webkit-prefixed version 
     * still needed for 
     * some mobile browsers ğŸ’”ğŸ˜­ */
    -webkit-filter: $blur;
            filter: $blur;
  }
}
```

## ç®€æ˜“insatagram

![16.instagram](http://127.0.0.1:8080/%23css/images/16.instagram.png)

```html
<h1>Image Editor with CSS Filters and jQuery</h1>
<!--Form for collecting image URL -->
<form id="urlBox" class="center">
  <input class="url-box" type="url" id="imgUrl" placeholder="Paste any image link and start playing!">
  <input id="go" type="button" value="Go">
</form>

<hr color="grey">
<div class="sliders">
  <form id="imageEditor">
    <p>
      <label for="gs">Grayscale</label>
      <input id="gs" name="gs" type="range" min="0" max="100" value="0">
    </p>
    <p>
      <label for="blur">Blur</label>
      <input id="blur" name="blur" type="range" min="0" max="10" value="0">
    </p>
    <p>
      <label for="br">Exposure</label>
      <input id="br" name="br" type="range" min="0" max="200" value="100">
    </p>
    <p>
      <label for="ct">Contrast</label>
      <input id="ct" name="ct" type="range" min="0" max="200" value="100">
    </p>
    <p>
      <label for="huer">Hue Rotate</label>
      <input id="huer" name="huer" type="range" min="0" max="360" value="0">
    </p>
    <p>
      <label for="opacity">Opacity</label>
      <input id="opacity" name="opacity" type="range" min="0" max="100" value="100">
    </p>
    <p>
      <label for="invert">Invert</label>
      <input id="invert" name="invert" type="range" min="0" max="100" value="0">
    </p>
    <p>
      <label for="saturate">Saturate</label>
      <input id="saturate" name="saturate" type="range" min="0" max="500" value="100">
    </p>
    <p>
      <label for="sepia">Sepia</label>
      <input id="sepia" name="sepia" type="range" min="0" max="100" value="0">
    </p>
    <input type="reset" form="imageEditor" id="reset" value="Reset" />
  </form>
</div>	

<!--container where image will be loaded-->
<div id="imageContainer" class="center">
  <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/stadium.jpg">
</div>

<p class="p">Demo by Vikas Lalwani. <a href="http://www.sitepoint.com/build-simple-image-editor-with-css-filters-jquery" target="_blank">See article</a>.</p>

```

```css
/* General styles for the page */ 
* {
  margin: 0;
  padding: 0;
}

body {
  background-color: #D2D7D3;
  font-family: monospace;
  margin: 0 auto;
  width: 960px;
}

h1 {
  margin: 25px 0 25px 0;
  font-size: 40px;
  text-align: center;
}

hr {
  margin: 20px 0;
}

form {
  text-align: center;
}

/* Styles for  URL box */ 

.url-box {
  background-color: transparent;
  display: inline-block;
  height: 30px;
  border: none;
  border-bottom: 4px solid #b3b3b1;
  padding: 0px 0px 0px 20px;
  margin: 0px 0px;
  width: 50%;
  outline: none;
  text-align: center;
  font-size: 15px;
  font-family: monospace;
  font-weight: 100;
  color: #000;
}

#go {
  display: inline-block;
  height: 50px;
  width: 50px;
  background-color: transparent;
  padding: 0px;
  border: 4px solid #b3b3b1;
  border-radius: 50%;
  box-shadow: none;
  cursor: pointer;
  outline: none;
  text-align: center;
  font-size: 20px;
  font-family: monospace;
  font-weight: 100;
  color: #000;
}

/* Styles for image container*/

#imageContainer {
  border: 2px solid grey;
  border-radius: 10px;
  padding: 5px;
  width: 65%;
  max-width: 600px;
  float: left;
  margin: 20px;
}

#imageContainer img {
  border-radius: 10px;
  width: 100%;
}

/* Styles for sliders*/

.sliders {
  float: left;
  border: 2px solid grey;
  border-radius: 10px;
  margin-top: 20px;
  margin-bottom: 20px;
  padding-left: 10px;
}

.sliders p {
  margin: 18px 0;
  vertical-align: middle;
}

.sliders label {
  display: inline-block;
  margin: 10px 0 0 0;
  width: 100px;
  font-size: 16px;
  color: #22313F;
  text-align: left;
  vertical-align: middle;
}

.sliders input {
  position: relative;
  margin: 10px 20px 0 10px;
  vertical-align: middle;
}

input[type=range] {
  /*removes default webkit styles*/
  -webkit-appearance: none;
  /*fix for FF unable to apply focus style bug */
  border-radius: 5px;
  /*required for proper track sizing in FF*/
  width: 150px;
}

input[type=range]::-webkit-slider-runnable-track {
  width: 300px;
  height: 7px;
  background: #ABB7B7;
  border: none;
  border-radius: 3px;
}

input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  border: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #4B77BE;
  margin-top: -6px;
  vertical-align: middle;
}
input[type=range]:focus {
  outline: none;
}

input[type=range]:hover {
	cursor: pointer;
}


#reset {
  display: inline-block;
  height: 40px;
  width: 100px;
  background-color: transparent;
  padding: 0px;
  border: 4px solid #b3b3b1;
  border-radius: 10px;
  box-shadow: none;
  cursor: pointer;
  outline: none;
  text-align: center;
  font-size: 20px;
  font-family: monospace;
  font-weight: 100;
  color: #000;
  margin: 0 0 10px 0;
}

.p {
  clear: both;
  text-align: center;
  padding:  40px 0 40px;
}
```

```js
//on click of go(submit) button, addImage() will be called
$("#go").click(addImage);

//on pressing return, addImage() will be called
$("#urlBox").submit(addImage);


// editing image via css properties
function editImage() {
	var gs = $("#gs").val(); // grayscale
	var blur = $("#blur").val(); // blur
	var br = $("#br").val(); // brightness
	var ct = $("#ct").val(); // contrast
	var huer = $("#huer").val(); //hue-rotate
	var opacity = $("#opacity").val(); //opacity
	var invert = $("#invert").val(); //invert
	var saturate = $("#saturate").val(); //saturate
	var sepia = $("#sepia").val(); //sepia

	$("#imageContainer img").css(
    "filter", 'grayscale(' + gs+
    '%) blur(' + blur +
    'px) brightness(' + br +
    '%) contrast(' + ct +
    '%) hue-rotate(' + huer +
    'deg) opacity(' + opacity +
    '%) invert(' + invert +
    '%) saturate(' + saturate +
    '%) sepia(' + sepia + '%)'
  );

	$("#imageContainer img").css(
    "-webkit-filter", 'grayscale(' + gs+
    '%) blur(' + blur +
    'px) brightness(' + br +
    '%) contrast(' + ct +
    '%) hue-rotate(' + huer +
    'deg) opacity(' + opacity +
    '%) invert(' + invert +
    '%) saturate(' + saturate +
    '%) sepia(' + sepia + '%)'
  );
}

//When sliders change image will be updated via editImage() function
$("input[type=range]").change(editImage).mousemove(editImage);

// Reset sliders back to their original values on press of 'reset'
$('#imageEditor').on('reset', function () {
	setTimeout(function() {
		editImage();
	}, 0);
});

// adding an image via url box
function addImage(e) {
	var imgUrl = $("#imgUrl").val();
	if (imgUrl.length) {
		$("#imageContainer img").attr("src", imgUrl);
	}
	e.preventDefault();	
}
```

### æ¼«ç”»é£æ ¼

### å‹ç¼©ä½“ç§¯

### é»‘ç™½ç…§ç‰‡è§†é¢‘å¤åŸ

## å…¼å®¹æ€§


## æ€»ç»“

å“‡å¡ï¼Œè¿™ä¹Ÿå¤ªå“‡å¡äº†å§ï¼ŒCSSç»ç»å­ï¼Œyyds


ä¹°å¡å…‹ https://codepen.io/positlabs/pen/jbmqON
https://codepen.io/bldng/details/xVxrEy
ç¢ç‰‡ https://codepen.io/bajjy/pen/vwrKk
hover å­—ä½“ https://codepen.io/adrianparr/details/AXdQNy
æ¯›ç»ç’ƒæ•ˆæœ https://codepen.io/KazuyoshiGoto/pen/nhstF
è€ç…§ç‰‡ https://codepen.io/dudleystorey/pen/pKoqa